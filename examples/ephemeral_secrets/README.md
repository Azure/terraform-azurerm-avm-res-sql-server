<!-- BEGIN_TF_DOCS -->
<!-- Code generated by terraform-docs. DO NOT EDIT. -->
# SQL Server with Ephemeral Secrets Example

This example demonstrates how to use the ephemeral secrets feature with write-only passwords for enhanced security.

```hcl
terraform {
  required_version = ">= 1.9, < 2.0"

  required_providers {
    azurerm = {
      source  = "hashicorp/azurerm"
      version = "~> 4.26"
    }
    random = {
      source  = "hashicorp/random"
      version = "~> 3.6"
    }
  }
}

provider "azurerm" {
  features {}
}

# This ensures we have unique CAF compliant names for our resources.
module "naming" {
  source  = "Azure/naming/azurerm"
  version = "0.3.0"
}

# This is required for resource modules
resource "azurerm_resource_group" "this" {
  location = "AustraliaEast"
  name     = module.naming.resource_group.name_unique
}

resource "random_password" "admin_password" {
  length           = 24
  override_special = "!#$%&*()-_=+[]{}<>:?"
  special          = true
}

locals {
  tags = {
    Environment = "example"
    Purpose     = "ephemeral-secrets-demo"
  }
}

# Example using ephemeral secrets for enhanced security
module "sql_server" {
  source = "../../"

  location                        = azurerm_resource_group.this.location
  resource_group_name             = azurerm_resource_group.this.name
  server_version                  = "12.0"
  administrator_login             = "mysqladmin"
  administrator_login_password_wo = random_password.admin_password.result
  enable_telemetry                = var.enable_telemetry
  name                            = module.naming.sql_server.name_unique
  tags                            = local.tags
}
```

<!-- markdownlint-disable MD033 -->
## Requirements

The following requirements are needed by this module:

- <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) (>= 1.9, < 2.0)

- <a name="requirement_azurerm"></a> [azurerm](#requirement\_azurerm) (~> 4.26)

- <a name="requirement_random"></a> [random](#requirement\_random) (~> 3.6)

## Resources

The following resources are used by this module:

- [azurerm_resource_group.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/resource_group) (resource)
- [random_password.admin_password](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/password) (resource)

<!-- markdownlint-disable MD013 -->
## Required Inputs

No required inputs.

## Optional Inputs

The following input variables are optional (have default values):

### <a name="input_enable_telemetry"></a> [enable\_telemetry](#input\_enable\_telemetry)

Description: This variable controls whether or not telemetry is enabled for the module. For more information see https://aka.ms/avm/telemetryinfo. If it is set to false, then no telemetry will be collected.

Type: `bool`

Default: `true`

## Outputs

No outputs.

## Modules

The following Modules are called:

### <a name="module_naming"></a> [naming](#module\_naming)

Source: Azure/naming/azurerm

Version: 0.3.0

### <a name="module_sql_server"></a> [sql\_server](#module\_sql\_server)

Source: ../../

Version:

## Benefits of Ephemeral Secrets

1. **Enhanced Security**: Passwords are never stored in Terraform state files
2. **Compliance**: Meets enterprise security requirements for credential management
3. **Rotation Support**: Version tracking enables automated password rotation
4. **Backward Compatibility**: Existing `administrator_login_password` usage remains unchanged

## Usage Pattern

This example shows how to use the new ephemeral secrets feature where:
- `administrator_login_password_wo` provides the password in write-only mode
- `administrator_login_password_wo_version` tracks the password version for rotation purposes
- The password is never stored in the Terraform state file
<!-- END_TF_DOCS -->